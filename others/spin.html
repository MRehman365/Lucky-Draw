<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin Wheel App</title>
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600&display=swap" rel="stylesheet">
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: "Poppins", sans-serif;
        }

        body {
            height: 100vh;
            background: linear-gradient(135deg, #c3a3f1, #6414e9);
            background-image: url(./157364-abstract-red-background-vector-illustration.jpg);
        }
        .top-bar{
            height: 150px;
            width: 100%;
            background-image: url(./red-background-waves-1392319652qJk.jpg);
            background-color: red;
            display: flex;
            justify-content: center;
            align-items: center;
            border-bottom: 3px solid white;
        }
        .top-bar img{
            position: relative;
            height: 15vh;
            width: 50%;
            margin-bottom: 120px;
            right: 2%;
        }

        .wrapper {
            width: 90%;
            max-width: 34.37em;
            max-height: 90vh;
            background-color: #ffffff5b;
            position: absolute;
            transform: translate(-50%, -50%);
            top: 61%;
            left: 75%;
            padding: 3em;
            border-radius: 1em;
            box-shadow: 0 4em 5em rgba(27, 8, 53, 0.2);
        }

        .container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        #wheel {
            max-height: inherit;
            width: inherit;
            top: 0;
            padding: 0;
        }

        @keyframes rotate {
            100% {
                transform: rotate(360deg);
            }
        }

        #spin-btn {
            position: absolute;
            transform: translate(-50%, -50%);
            top: 50%;
            left: 50%;
            height: 26%;
            width: 26%;
            border-radius: 50%;
            cursor: pointer;
            border: 0;
            background: radial-gradient(#fdcf3b 50%, #d88a40 85%);
            color: #c66e16;
            text-transform: uppercase;
            font-size: 1.8em;
            letter-spacing: 0.1em;
            font-weight: 600;
        }

        img {
            position: absolute;
            width: 4em;
            top: 45%;
            right: -8%;
        }

        #final-value {
            font-size: 1.5em;
            text-align: center;
            margin-top: 1.5em;
            color: #202020;
            font-weight: 500;
        }

        @media screen and (max-width: 768px) {
            .wrapper {
                font-size: 12px;
            }

            img {
                right: -5%;
            }
        }
        .main-container{
            display: flex;
            flex-wrap: wrap;
            margin-top: 100px;

        }
        ::-webkit-scrollbar{
                width: 7px;
            }
            ::-webkit-scrollbar-track{
                background: white;
                border-radius: 5px;
            }
            ::-webkit-scrollbar-thumb{
                background: red;
                border-radius: 5px;
            }
        .members{
            border-radius: 10px;
            height: 600px;
            width: 50%;
            background-color: rgba(255, 255, 255, 0.336);
            position: absolute;
            top: 22%;
            left: 2%;
            overflow: auto;
            display: flex;
            flex-direction: column;
            border: 3px solid black;
            
        }
        .member1{
            display: flex;
            gap: 10px;
            font-family: arial;
            background-color: red;
            border-bottom: 1px solid white;

        }
        .member1:nth-child(even){
            display: flex;
            gap: 10px;
            font-family: arial;
            background-color: rgb(247, 81, 81);
            border-bottom: 1px solid white;

        }
        @media (max-width: 450px){
            .wrapper {
            width: 90%;
            max-width: 34.37em;
            max-height: 90vh;
            background-color: #ffffff4d;
            position: absolute;
            transform: translate(-50%, -50%);
            top: 50%;
            left: 50%;
            padding: 3em;
            border-radius: 1em;
            box-shadow: 0 4em 5em rgba(27, 8, 53, 0.2);
        }
        .members{
            height: 400px;
            width: 98%;
            background-color: rgba(255, 255, 255, 0.336);
            position: absolute;
            top: 80%;
            left: 2%;
            overflow: auto;
            display: flex;
            flex-direction: column;
            
        }
            
    }
    #arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 20px solid rgba(255, 255, 255, 0.89);
            top: 0;
            left: 50%;
            rotate: 180deg;
            transform: translateX(40%) translateY(30%);
            z-index: 1;
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <img src="./masthead-luckydraw@2x.png" alt="image">
    </div>
    <div class="main-container">
        <div class="members">
            <div class="member1">
                <p>No 1</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 2</p>
                <p>ID:7230532</p>
            </div>
            <div class="member1">
                <p>No 3</p>
                <p>ID:52230142</p>
            </div>
            <div class="member1">
                <p>No 4</p>
                <p>ID:7003042</p>

            </div>
            <div class="member1">
                <p>No 5</p>
                <p>ID:7231454</p>
            </div>
            <div class="member1">
                <p>No 6</p>
                <p>ID:7236852</p>
            </div>
            <div class="member1">
                <p>No 7</p>
                <p>ID:7230654</p>
            </div>
            <div class="member1">
                <p>No 8</p>
                <p>ID:72317432</p>
            </div>
            <div class="member1">
                <p>No 9</p>
                <p>ID:725355142</p>
            </div>
            <div class="member1">
                <p>No 10</p>
                <p>ID:72301212</p>
            </div>
            <div class="member1">
                <p>No 11</p>
                <p>ID:7297342</p>
            </div>
            <div class="member1">
                <p>No 12</p>
                <p>ID:7230152</p>
            </div>
            <div class="member1">
                <p>No 13</p>
                <p>ID:72302313</p>
            </div>
            <div class="member1">
                <p>No 14</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 15</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 16</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 17</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 18</p>
                <p>ID:7230142</p>
            </div>
            
            <div class="member1">
                <p>No 19</p>
                <p>ID:7230142</p>
            </div>
           
            <div class="member1">
                <p>No 20</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 21</p>
                <p>ID:7230142</p>
            
            </div>
            
            <div class="member1">
                <p>No 22</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 23</p>
                <p>ID:7230142</p>
            </div>
           
            <div class="member1">
                <p>No 24</p>
                <p>ID:7230142</p>
            </div>
           
            <div class="member1">
                <p>No 25</p>
                <p>ID:7230142</p>
            </div>
           
            <div class="member1">
                <p>No 26</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 27</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 28</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 29</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 30</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 31</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 32</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 33</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 34</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 35</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 36</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 37</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 38</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 39</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 40</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 41</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 42</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 43</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 44</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 45</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 46</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 47</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 48</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 49</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 50</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 51</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 52</p>
                <p>ID:7230532</p>
            </div>
            <div class="member1">
                <p>No 53</p>
                <p>ID:52230142</p>
            </div>
            <div class="member1">
                <p>No 54</p>
                <p>ID:7003042</p>

            </div>
            <div class="member1">
                <p>No 55</p>
                <p>ID:7231454</p>
            </div>
            <div class="member1">
                <p>No 56</p>
                <p>ID:7236852</p>
            </div>
            <div class="member1">
                <p>No 57</p>
                <p>ID:7230654</p>
            </div>
            <div class="member1">
                <p>No 58</p>
                <p>ID:72317432</p>
            </div>
            <div class="member1">
                <p>No 59</p>
                <p>ID:725355142</p>
            </div>
            <div class="member1">
                <p>No 60</p>
                <p>ID:72301212</p>
            </div>
            <div class="member1">
                <p>No 61</p>
                <p>ID:7297342</p>
            </div>
            <div class="member1">
                <p>No 62</p>
                <p>ID:7230152</p>
            </div>
            <div class="member1">
                <p>No 63</p>
                <p>ID:72302313</p>
            </div>
            <div class="member1">
                <p>No 64</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 65</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 66</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 67</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 68</p>
                <p>ID:7230142</p>
            </div>
            
            <div class="member1">
                <p>No 69</p>
                <p>ID:7230142</p>
            </div>
           
            <div class="member1">
                <p>No 70</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 71</p>
                <p>ID:7230142</p>
            
            </div>
            
            <div class="member1">
                <p>No 72</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 73</p>
                <p>ID:7230142</p>
            </div>
           
            <div class="member1">
                <p>No 74</p>
                <p>ID:7230142</p>
            </div>
           
            <div class="member1">
                <p>No 75</p>
                <p>ID:7230142</p>
            </div>
           
            <div class="member1">
                <p>No 76</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 77</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 78</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 79</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 80</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 81</p>
                <p>ID:8230142</p>
            </div>
            <div class="member1">
                <p>No 82</p>
                <p>ID:8230142</p>
            </div>
            <div class="member1">
                <p>No 83</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 84</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 85</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 86</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 87</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 88</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 89</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 90</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 91</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 92</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 93</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 94</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 95</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 96</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 97</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 98</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 99</p>
                <p>ID:7230142</p>
            </div>
            <div class="member1">
                <p>No 100</p>
                <p>ID:7230142</p>
            </div>
        </div>
<div class="wrapper" style="border: 1px solid black;">
    <div class="container">
        <canvas id="wheel"></canvas>
        <div id="arrow"></div>
        <button id="spin-btn">Spin</button>
    </div>
    <div id="final-value">
        <p>Click On The Spin Button To Start</p>
    </div>
</div>
</div>
<!-- Chart JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<!-- Chart JS Plugin for displaying text over chart -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.1.0/chartjs-plugin-datalabels.min.js"></script>
<!-- Script -->
<script>
    const wheel = document.getElementById("wheel");
    const spinBtn = document.getElementById("spin-btn");
    const finalValue = document.getElementById("final-value");
    const rotationValues = [];

for (let i = 0; i < 100; i++) {
    const minDegree = i * 3.6; // Each value covers 3.6 degrees
    const maxDegree = (i + 1) * 3.6;
    const value = i + 1;
    rotationValues.push({ minDegree, maxDegree, value });
}
    //Size of each piece
    const data = Array.from({length: 100}, () => 1);
    const pieColors = Array.from({length: 100}, (_, i) => `hsl(${i * 7.2}, 70%, 50%)`);
    //Create chart
    const myChart = new Chart(wheel, {
        plugins: [ChartDataLabels],
        type: "pie",
        data: {
            //Labels(values which are to be displayed on chart)
            labels: Array.from({length: 100}, (_, i) => i + 1),
            datasets: [
                {
                    backgroundColor: pieColors,
                    data: data,
                },
            ],
        },
        options: {
            //Responsive chart
            responsive: true,
            animation: {duration: 0},
            plugins: {
                //hide tooltip and legend
                tooltip: false,
                legend: {
                    display: false,
                },
                datalabels: {
                    color: "#ffffff",
                    formatter: (_, context) => context.chart.data.labels[context.dataIndex],
                    font: {size: 7},
                    anchor: 'end',
                    align: 'start',
                },
            },
        },
    });
    
const valueGenerator = () => {
    // Get the current rotation angle of the spinner
    const spinnerRotation = myChart.options.rotation % 360;
    // Calculate the rotation angle for the number at the top center of the spinner
    const topCenterRotation = (360 - spinnerRotation) % 360;
    // Calculate the spinner number based on the rotation angle
    const spinnerNumber = Math.floor((topCenterRotation / 3.6) % 100) + 1;
    // Display the spinner number in the result
    finalValue.innerHTML = `<p>Congratulation Winner is No: ${spinnerNumber}</p>`;
    spinBtn.disabled = false;
};




    //Spinner count
    let count = 0;
    //100 rotations for animation and last rotation for result
    let resultValue = 100;
    //Start spinning
    spinBtn.addEventListener("click", () => {
        spinBtn.disabled = true;
        //Empty final value
        finalValue.innerHTML = `<p>Good Luck!</p>`;
        //Generate random degrees to stop at
        const randomDegree = Math.random() * 360;
        //Interval for rotation animation
        const rotationInterval = setInterval(() => {
          
            myChart.options.rotation = myChart.options.rotation + resultValue;
           
            myChart.update();
            //If rotation>360 reset it back to 0
            if (myChart.options.rotation >= 360) {
                count += 1;
                resultValue -= 5;
                myChart.options.rotation = 0;
            } else if (count > 15 && myChart.options.rotation >= randomDegree) {
                valueGenerator(myChart.options.rotation % 360);
                clearInterval(rotationInterval);
                count = 0;
                resultValue = 101;
            }
        }, 10);
    });

</script>
</body>
</html>
